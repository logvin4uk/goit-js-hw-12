{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getImage(query, page) {\n  const base_url = `https://pixabay.com/api/`;\n  const parameters = new URLSearchParams({\n    key: '43225287-97b9a21e329f588fe71ea406f',\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    page: page,\n    per_page: 15,\n  });\n\n  const responce = await axios\n    .get(`${base_url}?${parameters}`)\n    .then(res => {\n      return res;\n    })\n    .catch(err => console.log(err));\n  return responce;\n}\n","export const gallery = document.querySelector('.gallery');\nimport simpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nexport async function renderGallery(arr) {\n  const markup = arr\n    .map(photo => {\n      return `\n        <div class=\"gallery-item\">\n        <a href=\"${photo.largeImageURL}\" class=\"photo-item\">\n        <img class='img' src=\"${photo.webformatURL}\" \n        alt=\"${photo.tags}\"/>\n        </a>\n        <ul class=\"text-list\">\n        <li class=\"list-item\">Likes:<span class=\"image-text\">${photo.likes}</span></li>\n        <li class=\"list-item\">Views:<span class=\"image-text\">${photo.views}</span></li>\n        <li class=\"list-item\">Comments:<span class=\"image-text\">${photo.comments}</span></li>\n        <li class=\"list-item\">Downloads:<span class=\"image-text\">${photo.downloads}</span></li>\n        </ul>\n        </div>\n\n      `;\n    })\n    .join(' ');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n  const lightbox = new simpleLightbox('.gallery a');\n  lightbox.refresh();\n}\n","import { getImage } from './js/pixabay-api';\nimport { renderGallery } from './js/render-functions';\nimport { gallery } from './js/render-functions';\nimport simpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n// code\n\n// querySelectors\nconst loader = document.querySelector('.loader');\nconst addButton = document.querySelector('.addButton');\nconst form = document.querySelector('form');\n// eventListeners\nform.addEventListener('submit', submitImageFinder);\n\naddButton.addEventListener('click', addImageGallery);\n// other\n\nlet page;\n\nasync function submitImageFinder(event) {\n  event.preventDefault();\n\n  page = 1;\n  gallery.innerHTML = '';\n  addButton.classList.add('visible-hidden');\n  const value = event.target.elements.formInput.value.trim();\n  // Валидация значения пользователя в инпуте\n  if (value === '') {\n    iziToast.error({\n      color: 'red',\n      message: 'Please,type any text',\n      position: 'topRight',\n      title: 'Error',\n    });\n\n    gallery.innerHTML = '';\n  } else {\n    // запрос\n    await getImage(value, page)\n      // обработка ответа\n      .then(collection => {\n        // валидация не пустой ли массив изображений ответа\n        if (collection.data.hits.length < 1) {\n          iziToast.error({\n            color: 'red',\n            message:\n              'Sorry, there are no images matching your search query. Please try again!',\n            position: 'topRight',\n            title: 'Oops',\n          });\n        } else {\n          // создание галереи\n          loader.classList.add('show');\n          addButton.classList.remove('visible-hidden');\n          loader.classList.remove('show');\n          renderGallery(collection.data.hits);\n        }\n      })\n      .catch(err => console.log(err));\n  }\n}\n\nasync function addImageGallery(event) {\n  event.preventDefault();\n  //\n  const value = form.elements.formInput.value.trim();\n  const newpage = (page += 1);\n  //\n  loader.classList.add('show');\n  //\n\n  loader.classList.remove('show');\n  await getImage(value, newpage)\n    .then(collection => {\n      if (newpage * 15 > collection.data.totalHits) {\n        addButton.classList.add('visible-hidden');\n        iziToast.show({\n          title: 'Sorry',\n          message: \"We're sorry, but you've reached the end of search results.\",\n          color: 'pink',\n          position: 'topRight',\n        });\n      }\n      renderGallery(collection.data.hits);\n      const card = document.querySelector('.gallery-item');\n      const cardHeight = card.getBoundingClientRect();\n      window.scrollBy({\n        top: cardHeight.height * 2 + 48,\n        behavior: 'smooth',\n      });\n    })\n    .catch(err => console.log(err));\n}\n"],"names":["getImage","query","page","base_url","parameters","axios","res","err","gallery","renderGallery","arr","markup","photo","simpleLightbox","loader","addButton","form","submitImageFinder","addImageGallery","event","value","iziToast","collection","newpage","cardHeight"],"mappings":"owBAEO,eAAeA,EAASC,EAAOC,EAAM,CAC1C,MAAMC,EAAW,2BACXC,EAAa,IAAI,gBAAgB,CACrC,IAAK,qCACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAMC,EACN,SAAU,EACd,CAAG,EAQD,OANiB,MAAMG,EACpB,IAAI,GAAGF,CAAQ,IAAIC,CAAU,EAAE,EAC/B,KAAKE,GACGA,CACR,EACA,MAAMC,GAAO,QAAQ,IAAIA,CAAG,CAAC,CAElC,CCrBO,MAAMC,EAAU,SAAS,cAAc,UAAU,EAGjD,eAAeC,EAAcC,EAAK,CACvC,MAAMC,EAASD,EACZ,IAAIE,GACI;AAAA;AAAA,mBAEMA,EAAM,aAAa;AAAA,gCACNA,EAAM,YAAY;AAAA,eACnCA,EAAM,IAAI;AAAA;AAAA;AAAA,+DAGsCA,EAAM,KAAK;AAAA,+DACXA,EAAM,KAAK;AAAA,kEACRA,EAAM,QAAQ;AAAA,mEACbA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,OAK7E,EACA,KAAK,GAAG,EAEXJ,EAAQ,mBAAmB,YAAaG,CAAM,EAC7B,IAAIE,EAAe,YAAY,EACvC,QAAO,CAClB,CChBA,MAAMC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAY,SAAS,cAAc,YAAY,EAC/CC,EAAO,SAAS,cAAc,MAAM,EAE1CA,EAAK,iBAAiB,SAAUC,CAAiB,EAEjDF,EAAU,iBAAiB,QAASG,CAAe,EAGnD,IAAIhB,EAEJ,eAAee,EAAkBE,EAAO,CACtCA,EAAM,eAAc,EAEpBjB,EAAO,EACPM,EAAQ,UAAY,GACpBO,EAAU,UAAU,IAAI,gBAAgB,EACxC,MAAMK,EAAQD,EAAM,OAAO,SAAS,UAAU,MAAM,OAEhDC,IAAU,IACZC,EAAS,MAAM,CACb,MAAO,MACP,QAAS,uBACT,SAAU,WACV,MAAO,OACb,CAAK,EAEDb,EAAQ,UAAY,IAGpB,MAAMR,EAASoB,EAAOlB,CAAI,EAEvB,KAAKoB,GAAc,CAEdA,EAAW,KAAK,KAAK,OAAS,EAChCD,EAAS,MAAM,CACb,MAAO,MACP,QACE,2EACF,SAAU,WACV,MAAO,MACnB,CAAW,GAGDP,EAAO,UAAU,IAAI,MAAM,EAC3BC,EAAU,UAAU,OAAO,gBAAgB,EAC3CD,EAAO,UAAU,OAAO,MAAM,EAC9BL,EAAca,EAAW,KAAK,IAAI,EAE5C,CAAO,EACA,MAAMf,GAAO,QAAQ,IAAIA,CAAG,CAAC,CAEpC,CAEA,eAAeW,EAAgBC,EAAO,CACpCA,EAAM,eAAc,EAEpB,MAAMC,EAAQJ,EAAK,SAAS,UAAU,MAAM,OACtCO,EAAWrB,GAAQ,EAEzBY,EAAO,UAAU,IAAI,MAAM,EAG3BA,EAAO,UAAU,OAAO,MAAM,EAC9B,MAAMd,EAASoB,EAAOG,CAAO,EAC1B,KAAKD,GAAc,CACdC,EAAU,GAAKD,EAAW,KAAK,YACjCP,EAAU,UAAU,IAAI,gBAAgB,EACxCM,EAAS,KAAK,CACZ,MAAO,QACP,QAAS,6DACT,MAAO,OACP,SAAU,UACpB,CAAS,GAEHZ,EAAca,EAAW,KAAK,IAAI,EAElC,MAAME,EADO,SAAS,cAAc,eAAe,EAC3B,wBACxB,OAAO,SAAS,CACd,IAAKA,EAAW,OAAS,EAAI,GAC7B,SAAU,QAClB,CAAO,CACP,CAAK,EACA,MAAMjB,GAAO,QAAQ,IAAIA,CAAG,CAAC,CAClC"}